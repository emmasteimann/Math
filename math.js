!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).math=t()}(this,(function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var r=[],e=!0,i=!1,o=void 0;try{for(var u,c=n[Symbol.iterator]();!(e=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);e=!0);}catch(n){i=!0,o=n}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}return r}(n,t)||e(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n){return function(n){if(Array.isArray(n))return i(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n,t){if(n){if("string"==typeof n)return i(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(n,t):void 0}}function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var o=function(t){switch(t.constructor.name){case"vector":case"matrix":case"segment":case"ray":case"line":case"circle":case"ellipse":case"rect":case"polygon":case"junction":return t.constructor.name}if("object"===n(t)){if(null!=t.radius)return"circle";if(null!=t.width)return"rect";if(null!=t.x||"number"==typeof t[0])return"vector";if(null!=t[0]&&t[0].length&&("number"==typeof t[0].x||"number"==typeof t[0][0]))return"segment";if(null!=t.vector&&null!=t.origin)return"line"}},u=function(n,t){return t.length===n?t:Array(n).fill(0).map((function(n,r){return t[r]?t[r]:n}))},c=function(n,t){var r=n.length>t.length?n.length:t.length;return[n,t].map((function(n){return u(r,n)}))},a=function(n){var t="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},s=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if("number"!=typeof n)return n;var r=parseFloat(n.toFixed(t));return a(r)===Math.min(t,a(n))?n:r},f=function(n){return null!=n&&"function"==typeof n[Symbol.iterator]},l=function n(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return f(arguments[0])&&"string"!=typeof arguments[0]?n.apply(void 0,r(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(t){return f(t)?r(n(t)):t}))}},h=function n(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return f(arguments[0])&&"string"!=typeof arguments[0]?n.apply(void 0,r(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(t){return f(t)?r(n(t)):t})).reduce((function(n,t){return n.concat(t)}),[])}},v=Object.freeze({__proto__:null,resize:u,resize_up:c,resize_down:function(n,t){var r=n.length>t.length?t.length:n.length;return[n,t].map((function(n){return u(r,n)}))},clean_number:s,semi_flatten_arrays:l,flatten_arrays:h}),p=Object.create(null),g=[1,0,0,1],d=g.concat(0,0),_=function(n){return n[0]*n[3]-n[1]*n[2]},m=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.cos(n),e=Math.sin(n);return[r,e,-e,r,t[0],t[1]]},y=Object.freeze({__proto__:null,identity2x2:g,identity2x3:d,multiply_matrix2_vector2:function(n,t){return[n[0]*t[0]+n[2]*t[1]+n[4],n[1]*t[0]+n[3]*t[1]+n[5]]},multiply_matrix2_line2:function(n,t,r){return{vector:[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1]],origin:[n[0]*r[0]+n[2]*r[1]+n[4],n[1]*r[0]+n[3]*r[1]+n[5]]}},multiply_matrices2:function(n,t){return[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1],n[0]*t[2]+n[2]*t[3],n[1]*t[2]+n[3]*t[3],n[0]*t[4]+n[2]*t[5]+n[4],n[1]*t[4]+n[3]*t[5]+n[5]]},determinant2:_,invert_matrix2:function(n){var t=_(n);if(!(Math.abs(t)<1e-6||isNaN(t))&&isFinite(n[4])&&isFinite(n[5]))return[n[3]/t,-n[1]/t,-n[2]/t,n[0]/t,(n[2]*n[5]-n[3]*n[4])/t,(n[1]*n[4]-n[0]*n[5])/t]},make_matrix2_translate:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.concat(n,t)},make_matrix2_scale:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];return[n,0,0,t,n*-r[0]+r[0],t*-r[1]+r[1]]},make_matrix2_rotate:m,make_matrix2_reflect:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.atan2(n[1],n[0]),e=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),u=Math.sin(-r),c=e*o+i*u,a=e*-u+i*o,s=i*o+-e*u,f=i*-u+-e*o,l=t[0]+c*-t[0]+-t[1]*s,h=t[1]+a*-t[0]+-t[1]*f;return[c,a,s,f,l,h]}}),M=180/Math.PI,x=Math.PI/180,b=2*Math.PI,w=1e-6,j=Object.freeze({__proto__:null,R2D:M,D2R:x,TWO_PI:b,EPSILON:w}),A=function(n){return n*n},P=function(n,t){return n+(t||0)},O=function(n){return void 0!==n},k=function(n){return Math.sqrt(n.map(A).reduce(P,0))},S=function(n){return n.map(A).reduce(P,0)},z=function(n){var t=k(n);return 0===t?n:n.map((function(n){return n/t}))},I=function(n,t){return n.map((function(n){return n*t}))},q=function(n,t){return n.map((function(n,r){return n+(t[r]||0)}))},E=function(n,t){return n.map((function(n,r){return n-(t[r]||0)}))},N=function(n,t){return n.map((function(r,e){return n[e]*t[e]})).reduce(P,0)},G=function(n,t){return n.map((function(n,r){return(n+t[r])/2}))},F=function(){var n=arguments;if(0===arguments.length)return[];var t=arguments[0].length>0?arguments[0].length:0,r=Array(t).fill(0);return Array.from(arguments).forEach((function(n){return r.forEach((function(t,e){r[e]+=n[e]||0}))})),r.map((function(t){return t/n.length}))},L=function(n,t,r){var e=1-r;return n.map((function(n,i){return n*e+(t[i]||0)*r}))},R=function(n,t){return n[0]*t[1]-n[1]*t[0]},T=function(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]},Z=function(n,t){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)},C=function(n,t){return Math.sqrt(n.map((function(r,e){return Math.pow(n[e]-t[e],2)})).reduce((function(n,t){return n+t}),0))},D=function(n){return n.map((function(n){return-n}))},J=function(n){return[-n[1],n[0]]},X=function(n){return[n[1],-n[0]]},Y=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return Math.abs(n.reduce(P,0))<t},$=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return 1-Math.abs(N(z(n),z(t)))<r},B=function(n){return[0,1].map((function(t){return n.filter((function(n,r){return r%2===t})).reduce(P,0)}))},H=Object.freeze({__proto__:null,magnitude:k,mag_squared:S,normalize:z,scale:I,add:q,subtract:E,dot:N,midpoint:G,average:F,lerp:L,cross2:R,cross3:T,distance2:Z,distance3:function(n,t){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(r*r+e*e+i*i)},distance:C,flip:D,rotate90:J,rotate270:X,degenerate:Y,parallel:$,alternating_sum:B,alternating_deviation:function(n){var t=n.reduce(P,0)/2;return B(n).map((function(n){return n-t}))}}),U=Object.freeze([1,0,0,0,1,0,0,0,1]),V=Object.freeze(U.concat(0,0,0)),W=function(n){return V.map((function(t,r){return Math.abs(t-n[r])<w})).reduce((function(n,t){return n&&t}),!0)},K=function(n,t){return[n[0]*t[0]+n[3]*t[1]+n[6]*t[2]+n[9],n[1]*t[0]+n[4]*t[1]+n[7]*t[2]+n[10],n[2]*t[0]+n[5]*t[1]+n[8]*t[2]+n[11]]},Q=function(n,t,r){return{vector:[n[0]*t[0]+n[3]*t[1]+n[6]*t[2],n[1]*t[0]+n[4]*t[1]+n[7]*t[2],n[2]*t[0]+n[5]*t[1]+n[8]*t[2]],origin:[n[0]*r[0]+n[3]*r[1]+n[6]*r[2]+n[9],n[1]*r[0]+n[4]*r[1]+n[7]*r[2]+n[10],n[2]*r[0]+n[5]*r[1]+n[8]*r[2]+n[11]]}},nn=function(n,t){return[n[0]*t[0]+n[3]*t[1]+n[6]*t[2],n[1]*t[0]+n[4]*t[1]+n[7]*t[2],n[2]*t[0]+n[5]*t[1]+n[8]*t[2],n[0]*t[3]+n[3]*t[4]+n[6]*t[5],n[1]*t[3]+n[4]*t[4]+n[7]*t[5],n[2]*t[3]+n[5]*t[4]+n[8]*t[5],n[0]*t[6]+n[3]*t[7]+n[6]*t[8],n[1]*t[6]+n[4]*t[7]+n[7]*t[8],n[2]*t[6]+n[5]*t[7]+n[8]*t[8],n[0]*t[9]+n[3]*t[10]+n[6]*t[11]+n[9],n[1]*t[9]+n[4]*t[10]+n[7]*t[11]+n[10],n[2]*t[9]+n[5]*t[10]+n[8]*t[11]+n[11]]},tn=function(n){return n[0]*n[4]*n[8]-n[0]*n[7]*n[5]-n[3]*n[1]*n[8]+n[3]*n[7]*n[2]+n[6]*n[1]*n[5]-n[6]*n[4]*n[2]},rn=function(n){var t=tn(n);if(!(Math.abs(t)<1e-6||isNaN(t))&&isFinite(n[9])&&isFinite(n[10])&&isFinite(n[11])){var r=[n[4]*n[8]-n[7]*n[5],-n[1]*n[8]+n[7]*n[2],n[1]*n[5]-n[4]*n[2],-n[3]*n[8]+n[6]*n[5],n[0]*n[8]-n[6]*n[2],-n[0]*n[5]+n[3]*n[2],n[3]*n[7]-n[6]*n[4],-n[0]*n[7]+n[6]*n[1],n[0]*n[4]-n[3]*n[1],-n[3]*n[7]*n[11]+n[3]*n[8]*n[10]+n[6]*n[4]*n[11]-n[6]*n[5]*n[10]-n[9]*n[4]*n[8]+n[9]*n[5]*n[7],n[0]*n[7]*n[11]-n[0]*n[8]*n[10]-n[6]*n[1]*n[11]+n[6]*n[2]*n[10]+n[9]*n[1]*n[8]-n[9]*n[2]*n[7],-n[0]*n[4]*n[11]+n[0]*n[5]*n[10]+n[3]*n[1]*n[11]-n[3]*n[2]*n[10]-n[9]*n[1]*n[5]+n[9]*n[2]*n[4]],e=1/t;return r.map((function(n){return n*e}))}},en=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return U.concat(n,t,r)},on=function(n,t,r,e,i){var o=U.concat([0,1,2].map((function(n){return t[n]||0}))),u=Math.cos(n),c=Math.sin(n);return o[3*r+r]=u,o[3*r+e]=(i?1:-1)*c,o[3*e+r]=(i?-1:1)*c,o[3*e+e]=u,o},un=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return on(n,t,1,2,!0)},cn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return on(n,t,0,2,!1)},an=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return on(n,t,0,1,!0)},sn=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],i=u(3,z(r)),o=[0,1,2].map((function(n){return e[n]||0})),c=t(i,3),a=c[0],s=c[1],f=c[2],l=Math.cos(n),h=Math.sin(n),v=Math.sqrt(i[1]*i[1]+i[2]*i[2]),p=Math.abs(v)<1e-6?0:s/v,g=Math.abs(v)<1e-6?1:f/v,d=U.concat(-o[0],-o[1],-o[2]),_=U.concat(o[0],o[1],o[2]),m=[1,0,0,0,g,p,0,-p,g,0,0,0],y=[1,0,0,0,g,-p,0,p,g,0,0,0],M=[v,0,a,0,1,0,-a,0,v,0,0,0],x=[v,0,-a,0,1,0,a,0,v,0,0,0],b=[l,h,0,-h,l,0,0,0,1,0,0,0];return nn(_,nn(y,nn(x,nn(b,nn(M,nn(m,d))))))},fn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return[n,0,0,0,n,0,0,0,n,n*-t[0]+t[0],n*-t[1]+t[1],n*-t[2]+t[2]]},ln=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.atan2(n[1],n[0]),e=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),u=Math.sin(-r),c=e*o+i*u,a=e*-u+i*o,s=i*o+-e*u,f=i*-u+-e*o,l=t[0]+c*-t[0]+-t[1]*s,h=t[1]+a*-t[0]+-t[1]*f;return[c,a,0,s,f,0,0,0,1,l,h,0]},hn=Object.freeze({__proto__:null,identity3x3:U,identity3x4:V,is_identity3x4:W,multiply_matrix3_vector3:K,multiply_matrix3_line3:Q,multiply_matrices3:nn,determinant3:tn,invert_matrix3:rn,make_matrix3_translate:en,make_matrix3_rotateX:un,make_matrix3_rotateY:cn,make_matrix3_rotateZ:an,make_matrix3_rotate:sn,make_matrix3_scale:fn,make_matrix3_reflectZ:ln}),vn=function(n,t){return{vector:n||[],origin:t||[]}},pn=function(){if(arguments[0]instanceof p.vector)return arguments[0];var t=h(arguments);return t.length>0&&"object"===n(t[0])&&null!==t[0]&&!isNaN(t[0].x)&&(t=["x","y","z"].map((function(n){return t[0][n]})).filter(O)),t.filter((function(n){return"number"==typeof n}))},gn=function(){return l(arguments).map((function(n){return pn(n)}))},dn=function(){if(arguments[0]instanceof p.segment)return arguments[0];var n=l(arguments);return 4===n.length?[[n[0],n[1]],[n[2],n[3]]]:gn(n)},_n=function(){var n=l(arguments);return 0===n.length?vn([],[]):n[0]instanceof p.line||n[0]instanceof p.ray||n[0]instanceof p.segment?n[0]:n[0].constructor===Object?vn(n[0].vector||[],n[0].origin||[]):"number"==typeof n[0]?vn(pn(n)):vn.apply(void 0,r(n.map((function(n){return pn(n)}))))},mn=_n,yn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:n,y:t,width:r,height:e}},Mn=function(){if(arguments[0]instanceof p.rect)return arguments[0];var t=h(arguments);if(t.length>0&&"object"===n(t[0])&&null!==t[0]&&!isNaN(t[0].width))return yn.apply(void 0,r(["x","y","width","height"].map((function(n){return t[0][n]})).filter(O)));var e=t.filter((function(n){return"number"==typeof n})),i=e.length<4?[,,].concat(r(e)):e;return yn.apply(void 0,r(i))},xn=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return{radius:n,origin:[].concat(r)}},bn=function(){if(arguments[0]instanceof p.circle)return arguments[0];var n=gn(arguments),t=h(arguments).filter((function(n){return"number"==typeof n}));if(2===arguments.length){if(1===n[1].length)return xn.apply(void 0,[n[1][0]].concat(r(n[0])));if(1===n[0].length)return xn.apply(void 0,[n[0][0]].concat(r(n[1])));if(n[0].length>1&&n[1].length>1)return xn.apply(void 0,[Z.apply(void 0,r(n))].concat(r(n[0])))}else switch(t.length){case 0:return xn(1,0,0,0);case 1:return xn(t[0],0,0,0);default:return xn.apply(void 0,[t.pop()].concat(r(t)))}return xn(1,0,0,0)},wn=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach((function(n){return delete wn[2][n]}));var jn=function(n){return wn[n<8?0:n<13?1:2]},An=function(){var n=h(arguments),t=r(V);return jn(n.length).forEach((function(r,e){null!=n[e]&&(t[r]=n[e])})),t},Pn=Object.freeze({__proto__:null,get_vector:pn,get_vector_of_vectors:gn,get_segment:dn,get_line:_n,get_ray:mn,get_rect_params:yn,get_rect:Mn,get_circle:bn,get_matrix_3x4:An}),On=function(n,t){return n===t},kn=function(n,t){return Math.abs(n-t)<w},Sn=function(n,t){return Array.from(Array(n.length-1)).map((function(r,e){return t(n[0],n[e+1])})).reduce((function(n,t){return n&&t}),!0)},zn=function(){var n=Array.from(arguments),t=n.map((function(n){return n.length})).reduce((function(n,t){return n>t?n:t})),r=n.map((function(n){return u(t,n)}));return Array.from(Array(arguments.length-1)).map((function(n,t){return r[0].map((function(n,e){return Math.abs(r[0][e]-r[t+1][e])<w})).reduce((function(n,t){return n&&t}),!0)})).reduce((function(n,t){return n&&t}),!0)},In=Object.freeze({__proto__:null,equivalent_vec2:function(n,t){return Math.abs(n[0]-t[0])<w&&Math.abs(n[1]-t[1])<w},equivalent_numbers:function n(){return 0!==arguments.length&&(1===arguments.length&&void 0!==arguments[0]?n.apply(void 0,r(arguments[0])):Sn(arguments,kn))},equivalent_vectors:zn,equivalent:function(){var t=l.apply(void 0,arguments);if(t.length<1)return!1;var e=n(t[0]);if("undefined"===e)return!1;switch(e){case"number":return Sn(t,kn);case"boolean":case"string":return Sn(t,On);case"object":return t[0].constructor===Array?zn.apply(void 0,r(t)):Sn(t,(function(n,t){return JSON.stringify(n)===JSON.stringify(t)}));default:return}}}),qn=function(n){return n<-w?0:n},En=function(n){return n<-w?0:n>1.000001?1:n},Nn=function(n,t,r){for(var e,i=t.map((function(t,e){return{o:t,i:e,d:r(n,t)}})),o=1/0,u=0;u<i.length;u+=1)i[u].d<o&&(e=u,o=i[u].d);return e},Gn=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;t=u(n.length,t),r=u(n.length,r);var o=S(n),c=E(r,t),a=N(n,c),s=a/o,f=e(s,i);return q(t,I(n,f))},Fn=function(n,t){var r=n.map((function(n,t,r){return E(r[(t+1)%r.length],n)}));return n.map((function(n,e){return Gn(r[e],n,t,En)})).map((function(n,r){return{point:n,i:r,distance:C(n,t)}})).sort((function(n,t){return n.distance-t.distance})).shift()},Ln=function(n,t,r){return q(t,I(z(E(r,t)),n))},Rn=Object.freeze({__proto__:null,ray_limiter:qn,segment_limiter:En,smallest_comparison_search:Nn,nearest_point2:function(n,t){var r=Nn(n,t,Z);return void 0===r?void 0:t[r]},nearest_point:function(n,t){var r=Nn(n,t,C);return void 0===r?void 0:t[r]},nearest_point_on_line:Gn,nearest_point_on_polygon:Fn,nearest_point_on_circle:Ln,nearest_point_on_ellipse:function(){return!1}}),Tn=function(){return!0},Zn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return n>-t},Cn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return n>-t&&n<1+t},Dn=function(){return!0},Jn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return n>t},Xn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return n>t&&n<1-t},Yn=function(n,t,r,e,i,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:w,c=R(n,r),a=-c;if(!(Math.abs(R(z(n),z(r)))<u)){var s=R(E(e,t),r),f=R(E(t,e),n),l=s/c,h=f/a;return i(l,u/k(n))&&o(h,u/k(r))?q(t,I(n,l)):void 0}},$n=Object.freeze({__proto__:null,include_l:Tn,include_r:Zn,include_s:Cn,exclude_l:Dn,exclude_r:Jn,exclude_s:Xn,intersect_lines:Yn}),Bn=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w,o=E(n,r),u=S(t);if(Math.sqrt(u)<i)return!1;var c=Math.sqrt(u),a=R(o,t.map((function(n){return n/c}))),s=N(o,t)/u;return Math.abs(a)<i&&e(s,i/c)},Hn=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Math.abs(R(E(n,r),z(t)))<e},Un=Object.freeze({__proto__:null,collinear:Bn,point_on_line:Hn,point_on_ray_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Bn(n,t,r,Zn,e)},point_on_ray_exclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Bn(n,t,r,Jn,e)},point_on_segment_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Bn(n,E(r,t),t,Cn,e)},point_on_segment_exclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Bn(n,E(r,t),t,Xn,e)}}),Vn=function(n,t,r,e,i,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:w,c=R(n,r),a=-c;if(Math.abs(c)<u)return Bn(e,n,t,i,u)||Bn(e,D(n),q(t,n),i,u)||Bn(t,r,e,o,u)||Bn(t,D(r),q(e,r),o,u);var s=R(E(e,t),r),f=R(E(t,e),n),l=s/c,h=f/a;return i(l,u/k(n))&&o(h,u/k(r))},Wn=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(E(t,n),n,E(e,r),r,Cn,Cn,i)},Kn=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(E(t,n),n,E(e,r),r,Xn,Xn,i)},Qn=Object.freeze({__proto__:null,overlap_lines:Vn,overlap_line_line_inclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,r,e,Tn,Tn,i)},overlap_line_ray_inclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,r,e,Tn,Zn,i)},overlap_line_segment_inclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,E(e,r),r,Tn,Cn,i)},overlap_ray_ray_inclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,r,e,Zn,Zn,i)},overlap_ray_segment_inclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,E(e,r),r,Zn,Cn,i)},overlap_segment_segment_inclusive:Wn,overlap_line_line_exclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,r,e,Dn,Dn,i)},overlap_line_ray_exclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,r,e,Dn,Jn,i)},overlap_line_segment_exclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,E(e,r),r,Dn,Xn,i)},overlap_ray_ray_exclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,r,e,Jn,Jn,i)},overlap_ray_segment_exclusive:function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Vn(n,t,E(e,r),r,Jn,Xn,i)},overlap_segment_segment_exclusive:Kn}),nt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return t.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(t){return R(z(E(t[1],t[0])),E(n,t[0]))>-r})).map((function(n,t,r){return n===r[0]})).reduce((function(n,t){return n&&t}),!0)},tt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return t.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(t){return R(z(E(t[1],t[0])),E(n,t[0]))>r})).map((function(n,t,r){return n===r[0]})).reduce((function(n,t){return n&&t}),!0)},rt=function(n,t){for(var r=!1,e=0,i=t.length-1;e<t.length;i=e++)t[e][1]>n[1]!=t[i][1]>n[1]&&n[0]<(t[i][0]-t[e][0])*(n[1]-t[e][1])/(t[i][1]-t[e][1])+t[e][0]&&(r=!r);return r},et=function(n,t,r,e,i){for(var o=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})),u=t.map((function(n,t,r){return[n,r[(t+1)%r.length]]})),c=0;c<o.length;c+=1)for(var a=0;a<u.length;a+=1)if(r(o[c][0],o[c][1],u[a][0],u[a][1],i))return!0;return!!e(t[0],n,i)||!!e(n[0],t,i)},it=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return et(n,t,Kn,tt,r)},ot=Object.freeze({__proto__:null,point_in_convex_poly_inclusive:nt,point_in_convex_poly_exclusive:tt,point_in_poly:rt,overlap_convex_polygons_inclusive:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return et(n,t,Wn,nt,r)},overlap_convex_polygons_exclusive:it,enclose_convex_polygons_inclusive:function(n,t){var r=n.map((function(n){return nt(n,t)})).reduce((function(n,t){return n||t}),!1),e=t.map((function(n){return nt(n,t)})).reduce((function(n,t){return n&&t}),!0);return!r&&e}}),ut=function(n,t){return Math.abs(n[0]-t[0])<w&&Math.abs(n[1]-t[1])<w},ct=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Yn(n,t,E(e,r),r,Tn,Cn,i)},at=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Yn(n,t,E(e,r),r,Dn,Xn,i)},st=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Yn(n,t,E(e,r),r,Zn,Cn,i)},ft=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Yn(n,t,E(e,r),r,Jn,Xn,i)},lt=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Yn(E(t,n),n,E(e,r),r,Cn,Cn,i)},ht=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return Yn(E(t,n),n,E(e,r),r,Xn,Xn,i)},vt=function(n,t,r){for(;r<t;)r+=b;for(;n>t;)n-=b;for(;n<t;)n+=b;return n<r},pt=function(n,t){for(;n<0;)n+=b;for(;t<0;)t+=b;for(;n>b;)n-=b;for(;t>b;)t-=b;var r=t-n;return r>=0?r:b-(n-t)},gt=function(n,t){var r=t[0]*n[0]+t[1]*n[1],e=t[0]*n[1]-t[1]*n[0],i=Math.atan2(e,r);return i<0&&(i+=b),i},dt=function(n,t){var r=n[0]*t[0]+n[1]*t[1],e=n[0]*t[1]-n[1]*t[0],i=Math.atan2(e,r);return i<0&&(i+=b),i},_t=function(n,t){var r=Math.atan2(n[1],n[0])-gt(n,t)/2;return[Math.cos(r),Math.sin(r)]},mt=function(n,t){var r=Math.atan2(n[1],n[0])+dt(n,t)/2;return[Math.cos(r),Math.sin(r)]},yt=function(n,t,e,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w,u=R(n,e),c=N(n,e),a=u>-o?[mt(n,e)]:[_t(n,e)];a[1]=u>-o?J(a[0]):X(a[0]);var s=(i[0]-t[0])*e[1]-e[0]*(i[1]-t[1]),f=s/u,l=[n,e].map((function(n){return z(n)})),h=Math.abs(R.apply(void 0,r(l)))<o,v=h?G(t,i):[t[0]+n[0]*f,t[1]+n[1]*f],p=a.map((function(n){return{vector:n,origin:v}}));return h&&delete p[c>-o?1:0],p},Mt=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=t.map((function(n,t){return t})).sort((function(n,r){return t[n]-t[r]}));return e.slice(e.indexOf(0),e.length).concat(e.slice(0,e.indexOf(0)))},xt=function(n){return n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return pt.apply(void 0,r(n))})).map((function(n,t,r){return r.slice(t+1,r.length).concat(r.slice(0,t))})).map((function(n){return B(n).map((function(n){return Math.PI-n}))})).map((function(t,r){return n[r]+t[0]})).map((function(t,r){return vt(t,n[r],n[(r+1)%n.length])?t:void 0}))},bt=Object.freeze({__proto__:null,is_counter_clockwise_between:vt,clockwise_angle_radians:function(n,t){for(;n<0;)n+=b;for(;t<0;)t+=b;for(;n>b;)n-=b;for(;t>b;)t-=b;var r=n-t;return r>=0?r:b-(t-n)},counter_clockwise_angle_radians:pt,clockwise_angle2:gt,counter_clockwise_angle2:dt,clockwise_bisect2:_t,counter_clockwise_bisect2:mt,bisect_lines2:yt,counter_clockwise_radians_order:Mt,counter_clockwise_vector_order:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return Mt.apply(void 0,r(t.map((function(n){return Math.atan2(n[1],n[0])}))))},interior_angles:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.map((function(n,t,r){return dt(n,r[(t+1)%r.length])}))},kawasaki_solutions_radians:xt,kawasaki_solutions:function(n){var t=n.map((function(n){return Math.atan2(n[1],n[0])}));return xt(t).map((function(n){return void 0===n?void 0:[Math.cos(n),Math.sin(n)]}))}}),wt=function(n,t,r){var e=t[0]-n[0],i=t[1]-n[1],o=r[0]-n[0],u=r[1]-n[1],c=e*(n[0]+t[0])+i*(n[1]+t[1]),a=o*(n[0]+r[0])+u*(n[1]+r[1]),s=2*(e*(r[1]-t[1])-i*(r[0]-t[0]));if(Math.abs(s)<w){var f=Math.min(n[0],t[0],r[0]),l=Math.min(n[1],t[1],r[1]),h=.5*(Math.max(n[0],t[0],r[0])-f),v=.5*(Math.max(n[1],t[1],r[1])-l);return{origin:[f+h,l+v],radius:Math.sqrt(h*h+v*v)}}var p=[(u*c-i*a)/s,(e*a-o*c)/s],g=p[0]-n[0],d=p[1]-n[1];return{origin:p,radius:Math.sqrt(g*g+d*d)}},jt=function(n){return.5*n.map((function(n,t,r){var e=r[(t+1)%r.length];return n[0]*e[1]-e[0]*n[1]})).reduce(P,0)},At=function(n){var t=1/(6*jt(n));return n.map((function(n,t,r){var e=r[(t+1)%r.length],i=n[0]*e[1]-e[0]*n[1];return[(n[0]+e[0])*i,(n[1]+e[1])*i]})).reduce((function(n,t){return[n[0]+t[0],n[1]+t[1]]}),[0,0]).map((function(n){return n*t}))},Pt=function(n){var t=Array(n[0].length).fill(1/0),e=Array(n[0].length).fill(-1/0);n.forEach((function(n){return n.forEach((function(n,r){n<t[r]&&(t[r]=n),n>e[r]&&(e[r]=n)}))}));var i=e.map((function(n,r){return n-t[r]}));return yn.apply(void 0,r(t).concat(r(i)))},Ot=function(n){return Array.from(Array(Math.floor(n))).map((function(t,r){return b*(r/n)}))},kt=function(n,t){return n.map((function(n){return[t*Math.cos(n),t*Math.sin(n)]})).map((function(n){return n.map((function(n){return s(n,14)}))}))},St=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return kt(Ot(n),t)},zt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=Math.PI/n,e=Ot(n).map((function(n){return n+r}));return kt(e,t)},It=function(){return console.warn("split polygon not done")},qt=function(n,t,r){var e=n.map((function(n,e){return{point:Hn(n,t,r)?n:null,at_index:e}})).filter((function(n){return null!=n.point})),i=n.map((function(n,e,i){return{point:at(t,r,n,i[(e+1)%i.length]),at_index:e}})).filter((function(n){return null!=n.point}));if(2==i.length){var o=i.slice().sort((function(n,t){return n.at_index-t.at_index})),u=n.slice(o[1].at_index+1).concat(n.slice(0,o[0].at_index+1));u.push(o[0].point),u.push(o[1].point);var c=n.slice(o[0].at_index+1,o[1].at_index+1);return c.push(o[1].point),c.push(o[0].point),[u,c]}if(1==i.length&&1==e.length){e[0].type="v",i[0].type="e";var a=e.concat(i).sort((function(n,t){return n.at_index-t.at_index})),s=n.slice(a[1].at_index+1).concat(n.slice(0,a[0].at_index+1));"e"===a[0].type&&s.push(a[0].point),s.push(a[1].point);var f=n.slice(a[0].at_index+1,a[1].at_index+1);return"e"===a[1].type&&f.push(a[1].point),f.push(a[0].point),[s,f]}if(2==e.length){var l=e.slice().sort((function(n,t){return n.at_index-t.at_index}));return[n.slice(l[1].at_index).concat(n.slice(0,l[0].at_index+1)),n.slice(l[0].at_index,l[1].at_index+1)]}return[n.slice()]},Et=function(t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w,e=1e4,i=t.slice().sort((function(n,t){return Math.abs(n[1]-t[1])<r?n[0]-t[0]:n[1]-t[1]})),o=[];o.push(i[0]);var u=0,c=0,a=function(){c+=1;var n=o.length-1,t=i.filter((function(t){return!(Math.abs(t[0]-o[n][0])<r&&Math.abs(t[1]-o[n][1])<r)})).map((function(t){for(var r=Math.atan2(o[n][1]-t[1],o[n][0]-t[0]);r<u;)r+=2*Math.PI;return{node:t,angle:r,distance:void 0}})).sort((function(n,t){return n.angle<t.angle?-1:n.angle>t.angle?1:0}));if(0===t.length)return{v:void 0};var e=t[0];if(t=t.filter((function(n){return Math.abs(e.angle-n.angle)<r})).map((function(t){var r=Math.sqrt(Math.pow(o[n][0]-t.node[0],2)+Math.pow(o[n][1]-t.node[1],2));return t.distance=r,t})).sort((function(n,t){return n.distance<t.distance?1:n.distance>t.distance?-1:0})),o.filter((function(n){return n===t[0].node})).length>0)return{v:o};o.push(t[0].node),u=Math.atan2(o[n][1]-t[0].node[1],o[n][0]-t[0].node[0])};do{var s=a();if("object"===n(s))return s.v}while(c<e)},Nt=function n(t,r,e){var i=t.map((function(n,t){return{vector:e[t],origin:n}})).map((function(n,t,r){return Yn(n.vector,n.origin,r[(t+1)%r.length].vector,r[(t+1)%r.length].origin,Jn,Jn)})),o=r.map((function(n,t){return Gn(n.vector,n.origin,i[t],(function(n){return n}))}));if(3===t.length)return t.map((function(n){return{type:"skeleton",points:[n,i[0]]}})).concat([{type:"perpendicular",points:[o[0],i[0]]}]);var u=i.map((function(n,t){return C(n,o[t])})),c=0;u.forEach((function(n,t){n<u[c]&&(c=t)}));var a=[{type:"skeleton",points:[t[c],i[c]]},{type:"skeleton",points:[t[(c+1)%t.length],i[c]]},{type:"perpendicular",points:[o[c],i[c]]}],s=_t(D(r[(c+r.length-1)%r.length].vector),r[(c+1)%r.length].vector),f=c===t.length-1;return t.splice(c,2,i[c]),r.splice(c,1),e.splice(c,2,s),f&&(t.splice(0,1),e.splice(0,1),r.push(r.shift())),a.concat(n(t,r,e))},Gt=function(n){var t=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return{vector:E(n[1],n[0]),origin:n[0]}})),e=n.map((function(n,t,r){return[(t-1+r.length)%r.length,t,(t+1)%r.length].map((function(n){return r[n]}))})).map((function(n){return[E(n[0],n[1]),E(n[2],n[1])]})).map((function(n){return _t.apply(void 0,r(n))}));return Nt(n,t,e)},Ft=Object.freeze({__proto__:null,circumcircle:wt,signed_area:jt,centroid:At,enclosing_rectangle:Pt,make_regular_polygon:St,make_regular_polygon_side_aligned:zt,make_regular_polygon_inradius:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return St(n,t/Math.cos(Math.PI/n))},make_regular_polygon_inradius_side_aligned:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return zt(n,t/Math.cos(Math.PI/n))},make_regular_polygon_side_length:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return St(n,t/2/Math.sin(Math.PI/n))},make_regular_polygon_side_length_side_aligned:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return zt(n,t/2/Math.sin(Math.PI/n))},split_polygon:It,split_convex_polygon:qt,convex_hull:Et,straight_skeleton:Gt}),Lt=function(n){return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Rt=function(n,t,r){var e=t[0]-n[0],i=t[1]-n[1],o=e*Math.cos(r)+i*Math.sin(r),u=i*Math.cos(r)-e*Math.sin(r);return[n[0]+o,n[1]+u]},Tt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w,e=n.radius<t.radius?n.radius:t.radius,i=n.radius<t.radius?t.radius:n.radius,o=n.radius<t.radius?n.origin:t.origin,u=n.radius<t.radius?t.origin:n.origin,c=[o[0]-u[0],o[1]-u[1]],a=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2));if(!(a<r)){var s=c.map((function(n,t){return n/a*i+u[t]}));if(Math.abs(i+e-a)<r||Math.abs(i-(e+a))<r)return[s];if(!(a+e<i||i+e<a)){var f=Lt((e*e-a*a-i*i)/(-2*a*i)),l=Rt(u,s,+f),h=Rt(u,s,-f);return[l,h]}}},Zt=function(n,t,r,e,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:w,u=Math.pow(r[0],2)+Math.pow(r[1],2),c=Math.sqrt(u),a=0===c?r:r.map((function(n){return n/c})),s=[-a[1],a[0]],f=[e[0]-t[0],e[1]-t[1]],l=f[0]*a[1]-a[0]*f[1];if(!(Math.abs(l)>n+o)){var h=Math.sqrt(Math.pow(n,2)-Math.pow(l,2)),v=function(n,r){return t[r]-s[r]*l+a[r]*n},p=Math.abs(n-Math.abs(l))<o?[h].map((function(n){return[n,n].map(v)})):[-h,h].map((function(n){return[n,n].map(v)})),g=p.map((function(n){return n.map((function(n,t){return n-e[t]}))})).map((function(n){return n[0]*r[0]+r[1]*n[1]})).map((function(n){return n/u}));return p.filter((function(n,t){return i(g[t],o)}))}},Ct=function(){return!0},Dt=function(n,t){return n>-t},Jt=function(n,t){return n>-t&&n<1+t},Xt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return Zt(n.radius,n.origin,t.vector,t.origin,Ct,r)},Yt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return Zt(n.radius,n.origin,t.vector,t.origin,Dt,r)},$t=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return Zt(n.radius,n.origin,t.vector,t.origin,Jt,r)},Bt=Object.freeze({__proto__:null,circle_circle:Tt,intersect_circle_line:Zt,circle_line:Xt,circle_ray:Yt,circle_segment:$t}),Ht=function(n){var t=Math.pow(Math.abs(n),1/3);return n<0?-t:t},Ut=Object.freeze({__proto__:null,axiom1:function(n,t){return p.line(z(E.apply(void 0,r(c(t,n)))),n)},axiom2:function(n,t){return p.line(z(J(E.apply(void 0,r(c(t,n))))),G(n,t))},axiom3:function(n,t,r,e){return yt(n,t,r,e).map(p.line)},axiom4:function(n,t){return p.line(J(z(n)),t)},axiom5:function(n,t,e,i){return(Zt(C(e,i),e,n,t,(function(){return!0}))||[]).map((function(n){return p.line(z(J(E.apply(void 0,r(c(n,i))))),G(i,n))}))},axiom7:function(n,t,e,i){var o=Yn(n,t,e,i,Tn,Tn);return void 0===o?void 0:p.line(z(J(E.apply(void 0,r(c(o,i))))),G(i,o))},axiom6:function(n,t,r,e,i,o){var u=i[0],c=i[1];if(Math.abs(n[0])>w)var a=n[1]/n[0],s=t[1]-a*t[0];else var f=t[0];var l=o[0],h=o[1];if(Math.abs(r[0])>w)var v=r[1]/r[0],g=e[1]-v*e[0];else var d=e[0];if(void 0!==a&&void 0!==v)var _=a*a+1,m=2*a*s,y=s*s-u*u-c*c,M=v*v+1,x=2*v*g,b=g*g-l*l-h*h,j=v*u+(s-c),A=u*(g-h)-l*(s-c),P=v-a,O=a*l+(g-h),k=a*u+(s-c);else if(void 0===a&&void 0===v)_=1,m=0,y=f*f-u*u-c*c,M=1,x=0,b=d*d-l*l-h*h,A=c*(d-l)-h*(f-u),P=0,O=d-l,k=j=f-u;else{if(void 0===a){var S=u;u=l,l=S;var z=c;c=h,h=z,a=v,v=void 0,s=g,g=void 0,d=f,f=void 0}_=a*a+1,m=2*a*s,y=s*s-u*u-c*c,M=1,x=0,b=d*d-l*l-h*h,j=u,A=(s-c)*(d-l)-u*h,P=1,O=-a*(d-l)-h,k=a*u+(s-c)}var I=function(n,t,r,e){if(Math.abs(n)<w){if(n=t,t=r,r=e,Math.abs(n)<w)return n=t,t=r,Math.abs(n)<w?[]:[-t/n];var i=t*t-4*n*r;return Math.abs(i)<w?[-t/(2*n)]:i>0?[(-t+Math.sqrt(i))/(2*n),(-t-Math.sqrt(i))/(2*n)]:[]}var o,u=(3*n*r-t*t)/(3*n*n),c=(2*t*t*t-9*n*t*r+27*n*n*e)/(27*n*n*n);if(Math.abs(u)<w)o=[Ht(-c)];else if(Math.abs(c)<w)o=[0].concat(u<0?[Math.sqrt(-u),-Math.sqrt(-u)]:[]);else{var a=c*c/4+u*u*u/27;if(Math.abs(a)<w)o=[-1.5*c/u,3*c/u];else if(a>0){var s=Ht(-c/2-Math.sqrt(a));o=[s-u/(3*s)]}else{var f=2*Math.sqrt(-u/3),l=Math.acos(3*c/u/f)/3,h=2*Math.PI/3;o=[f*Math.cos(l),f*Math.cos(l-h),f*Math.cos(l-2*h)]}}for(var v=0;v<o.length;v+=1)o[v]-=t/(3*n);return o}(M*P*k,(M*O+x*P)*k-(_*j*j+m*j*P+y*P*P),(x*O+b*P)*k-(2*_*j*A+m*(j*O+A*P)+2*y*P*O),b*O*k-(_*A*A+m*A*O+y*O*O)),q=[];if(null!=I&&I.length>0)for(var E=0;E<I.length;++E){if(void 0!==a&&void 0!==v)var N=I[E],G=v*N+g;else G=I[E],N=d;if(G!=h){var F=-1*(N-l)/(G-h),L=(G*G-h*h+N*N-l*l)/(2*(G-h));q.push(p.line.fromPoints([0,L],[1,F]))}else{var R=(N+l)/2;q.push(p.line.fromPoints([R,0],[0,1]))}}return q}}),Vt=function(n){for(var t=1;t<n.length;t+=1)if(!ut(n[0],n[t]))return[n[0],n[t]]},Wt=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w,o=t.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(t){return n(r,e,t[0],t[1],i)})).filter((function(n){return null!=n}));switch(o.length){case 0:return;case 1:return[o];default:return Vt(o)||[o[0]]}},Kt=function(n,t,e,i,o){var u,c=Wt(n,t,e,i,o);switch(n){case at:u=ct;break;case ft:u=st;break;case ht:u=lt;break;case ct:case st:case lt:default:return c}var a=Wt(u,t,e,i,o);if(void 0!==a){var s=Vt(a);if(void 0===s)switch(n){case at:return;case ft:return tt(i,t,o)?a:void 0;case ht:return tt(e,t,o)||tt(i,t,o)?a:void 0}return tt(G.apply(void 0,r(s)),t,o)?s:c}},Qt=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Kt(at,n,t,r,e)},nr=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Kt(ft,n,t,r,e)},tr=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Kt(ht,n,t,r,e)},rr=Object.freeze({__proto__:null,convex_poly_line_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Kt(ct,n,t,r,e)},convex_poly_line_exclusive:Qt,convex_poly_ray_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Kt(st,n,t,r,e)},convex_poly_ray_exclusive:nr,convex_poly_segment_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return Kt(lt,n,t,r,e)},convex_poly_segment_exclusive:tr}),er=function(n,t){return Qt(n,t.vector,t.origin)},ir=function(n,t){return nr(n,t.vector,t.origin)},or=function(n,t){return tr(n,t[0],t[1])},ur=function(n,t,r,e,i){return Yn(n.vector,n.origin,t.vector,t.origin,r,e,i)},cr={polygon:{line:er,ray:ir,segment:or},circle:{circle:Tt,line:Xt,ray:Yt,segment:$t},line:{polygon:function(n,t){return er(t,n)},circle:function(n,t){return Xt(t,n)},line:function(n,t,r){return ur(n,t,Dn,Dn,r)},ray:function(n,t,r){return ur(n,t,Dn,Jn,r)},segment:function(n,t,r){return ur(n,t,Dn,Xn,r)}},ray:{polygon:function(n,t){return ir(t,n)},circle:function(n,t){return Yt(t,n)},line:function(n,t,r){return ur(t,n,Dn,Jn,r)},ray:function(n,t,r){return ur(n,t,Jn,Jn,r)},segment:function(n,t,r){return ur(n,t,Jn,Xn,r)}},segment:{polygon:function(n,t){return or(t,n)},circle:function(n,t){return $t(t,n)},line:function(n,t,r){return ur(t,n,Dn,Xn,r)},ray:function(n,t,r){return ur(t,n,Jn,Xn,r)},segment:function(n,t,r){return ur(n,t,Xn,Xn,r)}}},ar={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment"},sr=function(n,t){var r,e=ar[o(n)],i=ar[o(t)];return(r=cr[e])[i].apply(r,arguments)},fr=Object.assign(Object.create(null),Qn,Un,ot),lr=function(n){for(var t=1;t<n.length;t+=1)if(!ut(n[0],n[t]))return[n[0],n[t]]},hr=function(n){for(var t=[],r=0;r<n.length;r+=1){for(var e=!1,i=0;i<t.length;i+=1)ut(n[r],t[i])&&(e=!0);e||t.push(n[r])}return t},vr=function(n,t){return n.map((function(n){return{point:n,d:n[0]*t[0]+n[1]*t[1]}})).sort((function(n,t){return n.d-t.d})).map((function(n){return n.point}))},pr=function(n,t,e){var i=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return E.apply(void 0,r(n))}));return i.map((function(n,r){return $(n,t)?r:void 0})).filter(O).map((function(t){return Hn(e,i[t],n[t])})).reduce((function(n,t){return n||t}),!1)},gr=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;return t.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(t){return n(r,e,t[0],t[1],i)})).filter(O)},dr=function(n,t,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,o=(gr(at,n,t,e,i),gr(ct,n,t,e,i));if(void 0!==o){var u=lr(o);if(void 0!==u)return tt(G.apply(void 0,r(u)),n,i)?u:void 0}},_r=function(n,t,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,o=(gr(ft,n,t,e,i),gr(st,n,t,e,i));if(void 0!==o){var u=lr(o);return void 0===u?tt(e,n,i)?[e,o[0]]:void 0:tt(G.apply(void 0,r(u)),n,i)?u:void 0}},mr=function(n,t,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,o=[t,e],u=o.map((function(t){return nt(t,n,i)}));if(!0===u[0]&&!0===u[1])return[r(t),r(e)];var c=gr(lt,n,t,e,i),a=hr(c);if(2===a.length)return a;if(a.length>2){var s=vr(a,E(e,t));return[s[0],s[s.length-1]]}if(c.length>0){var f=o.map((function(t){return tt(t,n,i)}));if(!0===f[0])return[r(t),c[0]];if(!0===f[1])return[r(e),c[0]]}},yr=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,i=E(r,t);if(!pr(n,i,t))return mr(n,t,r,e)},Mr=Object.freeze({__proto__:null,clip_line_in_convex_poly_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,i=gr(ct,n,t,r,e);switch(i.length){case 0:case 1:return;default:return lr(i)}},clip_line_in_convex_poly_exclusive:dr,clip_ray_in_convex_poly_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,i=gr(st,n,t,r,e);if(0!==i.length){nt(r,n);return lr(i)||[r,i[0]]}},clip_ray_in_convex_poly_exclusive:_r,clip_segment_in_convex_poly_inclusive:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;return mr(n,t,r,e)},clip_segment_in_convex_poly_exclusive:yr}),xr={preserve:{magnitude:function(){return k(this)},isEquivalent:function(){return zn(this,pn(arguments))},isParallel:function(){return $.apply(void 0,r(c(this,pn(arguments))))},dot:function(){return N.apply(void 0,r(c(this,pn(arguments))))},distanceTo:function(){return C.apply(void 0,r(c(this,pn(arguments))))}},vector:{copy:function(){return r(this)},normalize:function(){return z(this)},scale:function(){return I(this,arguments[0])},flip:function(){return D(this)},rotate90:function(){return J(this)},rotate270:function(){return X(this)},cross:function(){return T(u(3,this),u(3,pn(arguments)))},transform:function(){return K(An(arguments),u(3,this))},add:function(){return q(this,u(this.length,pn(arguments)))},subtract:function(){return E(this,u(this.length,pn(arguments)))},rotateZ:function(n,t){return K(An(m(n,t)),u(3,this))},lerp:function(n,t){return L(this,u(this.length,pn(n)),t)},midpoint:function(){return G.apply(void 0,r(c(this,pn(arguments))))},bisect:function(){return mt(this,pn(arguments))}}},br={};Object.keys(xr.preserve).forEach((function(n){br[n]=xr.preserve[n]})),Object.keys(xr.vector).forEach((function(n){br[n]=function(){return p.vector.apply(p,r(xr.vector[n].apply(this,arguments)))}}));var wr={fromAngle:function(n){return p.vector(Math.cos(n),Math.sin(n))},fromAngleDegrees:function(n){return p.vector.fromAngle(n*x)}},jr={vector:{P:Array.prototype,A:function(){var n=this;pn(arguments).forEach((function(t){return n.push(t)}))},G:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},M:br,S:wr}},Ar={};Ar.prototype=Object.create(Object.prototype),Ar.prototype.constructor=Ar,Ar.prototype.isParallel=function(){var n=c(this.vector,_n.apply(void 0,arguments).vector);return $.apply(void 0,r(n))},Ar.prototype.isCollinear=function(){var n=_n(arguments);return Hn(n.origin,this.vector,this.origin)&&$.apply(void 0,r(c(this.vector,n.vector)))},Ar.prototype.isDegenerate=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;return Y(this.vector,n)},Ar.prototype.reflectionMatrix=function(){return p.matrix(ln(this.vector,this.origin))},Ar.prototype.nearestPoint=function(){var n=pn(arguments);return p.vector(Gn(this.vector,this.origin,n,this.clip_function))},Ar.prototype.transform=function(){var n=this.dimension,t=Q(An(arguments),u(3,this.vector),u(3,this.origin));return this.constructor(u(n,t.vector),u(n,t.origin))},Ar.prototype.translate=function(){var n=q.apply(void 0,r(c(this.origin,pn(arguments))));return this.constructor(this.vector,n)},Ar.prototype.intersect=function(n){return sr(this,n)},Ar.prototype.bisect=function(){var n=_n(arguments);return yt(this.vector,this.origin,n.vector,n.origin)},Object.defineProperty(Ar.prototype,"dimension",{get:function(){return[this.vector,this.origin].map((function(n){return n.length})).reduce((function(n,t){return Math.max(n,t)}),0)}});var Pr={fromPoints:function(){var n=gn(arguments);return this.constructor({vector:E(n[1],n[0]),origin:n[0]})},fromAngle:function(){var n=arguments[0]||0;return this.constructor({vector:[Math.cos(n),Math.sin(n)],origin:[0,0]})},perpendicularBisector:function(){var n=gn(arguments);return this.constructor({vector:J(E(n[1],n[0])),origin:F(n[0],n[1])})}},Or={line:{P:Ar.prototype,A:function(){var n=_n.apply(void 0,arguments);this.vector=p.vector(n.vector),this.origin=p.vector(u(this.vector.length,n.origin))},G:{length:function(){return 1/0}},M:{clip_function:function(n){return n},svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,t=this.origin.add(this.vector.scale(-n/2)),r=this.vector.scale(n);return"M".concat(t[0]," ").concat(t[1],"l").concat(r[0]," ").concat(r[1])}},S:Pr}},kr={ray:{P:Ar.prototype,A:function(){var n=_n.apply(void 0,arguments);this.vector=p.vector(n.vector),this.origin=p.vector(u(this.vector.length,n.origin))},G:{length:function(){return 1/0}},M:{flip:function(){return p.ray(D(this.vector),this.origin)},scale:function(n){return p.ray(this.vector.scale(n),this.origin)},normalize:function(){return p.ray(this.vector.normalize(),this.origin)},clip_function:qn,svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=this.vector.scale(n);return"M".concat(this.origin[0]," ").concat(this.origin[1],"l").concat(t[0]," ").concat(t[1])}},S:Pr}},Sr={segment:{P:Ar.prototype,A:function(){var n=dn.apply(void 0,arguments);this.points=[p.vector(n[0]),p.vector(n[1])],this.vector=this.points[1].subtract(this.points[0]),this.origin=this.points[0]},G:{0:function(){return this.points[0]},1:function(){return this.points[1]},length:function(){return this.vector.magnitude()}},M:{clip_function:En,transform:function(){for(var n=this.points[0].length,t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var i=An(r),o=this.points.map((function(n){return u(3,n)})).map((function(n){return K(i,n)})).map((function(t){return u(n,t)}));return p.segment(o)},translate:function(){var n=get_vector(arguments),t=this.points.map((function(t){return add.apply(void 0,r(resize_up(t,n)))}));return p.segment(t)},midpoint:function(){return p.vector(F(this.points[0],this.points[1]))},svgPath:function(){var n=this.points.map((function(n){return"".concat(n[0]," ").concat(n[1])}));return["M","L"].map((function(t,r){return"".concat(t).concat(n[r])})).join("")}},S:{fromPoints:function(){return this.constructor.apply(this,arguments)}}}},zr=function(n,t,r,e,i,o){var u=Math.cos(i),c=Math.sin(i),a=Math.cos(o),s=Math.sin(o);return[n+u*r*a+-c*e*s,t+c*r*a+u*e*s]},Ir=function(n,t,r,e,i,o,u){var c=o;if(c<0&&!isNaN(c))for(;c<0;)c+=2*Math.PI;var a=u>2*Math.PI?2*Math.PI:u,s=zr(n,t,r,e,i,c),f=zr(n,t,r,e,i,c+a/2),l=zr(n,t,r,e,i,c+a),h=a/2>Math.PI?1:0,v=a/2>0?1:0;return{x1:s[0],y1:s[1],x2:f[0],y2:f[1],x3:l[0],y3:l[1],fa:h,fs:v}},qr=function(n){return s(n,4)},Er=function(n,t,r,e,i,o,u){return"A".concat(qr(n)," ").concat(qr(t)," ").concat(qr(r)," ").concat(qr(e)," ").concat(qr(i)," ").concat(qr(o)," ").concat(qr(u))},Nr={circle:{A:function(){var n=bn.apply(void 0,arguments);this.radius=n.radius,this.origin=p.vector.apply(p,r(n.origin))},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},z:function(){return this.origin[2]}},M:{nearestPoint:function(){return p.vector(Ln(this.radius,this.origin,pn(arguments)))},intersect:function(n){return sr(this,n)},svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,r=Ir(this.origin[0],this.origin[1],this.radius,this.radius,0,n,t),e=Er(this.radius,this.radius,0,r.fa,r.fs,r.x2,r.y2),i=Er(this.radius,this.radius,0,r.fa,r.fs,r.x3,r.y3);return"M".concat(r.x1," ").concat(r.y1).concat(e).concat(i)},points:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(t)).map((function(n,r){return 2*Math.PI/t*r})).map((function(t){return[n.origin[0]+n.radius*Math.cos(t),n.origin[1]+n.radius*Math.sin(t)]}))},polygon:function(){return p.polygon(this.points(arguments[0]))},segments:function(){var n=this.points(arguments[0]);return n.map((function(t,r){var e=(r+1)%n.length;return[t,n[e]]}))}},S:{fromPoints:function(){if(3===arguments.length){var n=wt.apply(void 0,arguments);return this.constructor(n.radius,n.origin)}return this.constructor.apply(this,arguments)},fromThreePoints:function(){var n=wt.apply(void 0,arguments);return this.constructor(n.radius,n.origin)}}}},Gr=function(n,t,r,e){var i=t>r,o=i?Math.pow(t,2)-Math.pow(r,2):Math.pow(r,2)-Math.pow(t,2),u=Math.sqrt(o),c=i?Math.cos(e):Math.sin(e),a=i?Math.sin(e):Math.cos(e);return[p.vector(n[0]+u*c,n[1]+u*a),p.vector(n[0]-u*c,n[1]-u*a)]},Fr={ellipse:{A:function(){var n=h(arguments).filter((function(n){return!isNaN(n)})),t=u(5,n);this.rx=t[0],this.ry=t[1],this.origin=p.vector(t[2],t[3]),this.spin=t[4],this.foci=Gr(this.origin,this.rx,this.ry,this.spin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,r=Ir(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,n,t),e=Er(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x2,r.y2),i=Er(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x3,r.y3);return"M".concat(r.x1," ").concat(r.y1).concat(e).concat(i)},points:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(t)).map((function(n,r){return 2*Math.PI/t*r})).map((function(t){return zr(n.origin.x,n.origin.y,n.rx,n.ry,n.spin,t)}))},polygon:function(){return p.polygon(this.points(arguments[0]))},segments:function(){var n=this.points(arguments[0]);return n.map((function(t,r){var e=(r+1)%n.length;return[t,n[e]]}))}},S:{}}},Lr=function(n){return void 0===n?void 0:p.segment(n)},Rr={area:function(){return jt(this)},centroid:function(){return p.vector(At(this))},enclosingRectangle:function(){return p.rect(Pt(this))},contains:function(){return rt(pn(arguments),this)},scale:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At(this),r=this.map((function(n){return[0,1].map((function(r,e){return n[e]-t[e]}))})).map((function(r){return r.map((function(e,i){return t[i]+r[i]*n}))}));return this.constructor.fromPoints(r)},rotate:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At(this),r=this.map((function(r){var e=[r[0]-t[0],r[1]-t[1]],i=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),o=Math.atan2(e[1],e[0]);return[t[0]+Math.cos(o+n)*i,t[1]+Math.sin(o+n)*i]}));return p.polygon(r)},translate:function(){var n=pn.apply(void 0,arguments),t=this.map((function(t){return t.map((function(t,r){return t+n[r]}))}));return this.constructor.fromPoints(t)},transform:function(){var n=An.apply(void 0,arguments),t=this.map((function(t){return K(n,u(3,t))}));return p.polygon(t)},nearest:function(){var n=pn.apply(void 0,arguments),t=Fn(this,n);return void 0===t?void 0:Object.assign(t,{edge:this.sides[t.i]})},overlaps:function(){var n=l(arguments);return it(this,n)},split:function(){var n=_n.apply(void 0,arguments),t=this.isConvex?qt:It;return t(this,n.vector,n.origin).map((function(n){return p.polygon(n)}))},intersectLine:function(){var n=_n.apply(void 0,arguments);return Qt(this,n.vector,n.origin)},intersectRay:function(){var n=_n.apply(void 0,arguments);return nr(this,n.vector,n.origin)},intersectSegment:function(){var n=dn.apply(void 0,arguments);return tr(this,n[0],n[1])},clipLine:function(){var n=_n.apply(void 0,arguments),t=dr(this,n.vector,n.origin);return Lr(t)},clipRay:function(){var n=_n.apply(void 0,arguments),t=_r(this,n.vector,n.origin);return Lr(t)},clipSegment:function(){var n=dn.apply(void 0,arguments),t=yr(this,n[0],n[1]);return Lr(t)},clip:function(n){switch(o(n)){case"segment":return this.clipSegment(n);case"ray":return this.clipRay(n);case"line":return this.clipLine(n);default:return}},svgPath:function(){var n=Array(this.length).fill("L");return n[0]="M","".concat(this.map((function(t,r){return"".concat(n[r]).concat(t[0]," ").concat(t[1])})).join(""),"z")},intersect:function(n){return sr(this,n)}},Tr={};Tr.prototype=Object.create(Array.prototype),Tr.prototype.constructor=Tr,Object.keys(Rr).forEach((function(n){Tr.prototype[n]=Rr[n]}));var Zr=function(n){return[[n.x,n.y],[n.x+n.width,n.y],[n.x+n.width,n.y+n.height],[n.x,n.y+n.height]]},Cr={rect:{P:Tr.prototype,A:function(){var n=Mn.apply(void 0,arguments);this.width=n.width,this.height=n.height,this.origin=p.vector(n.x,n.y),this.push.apply(this,r(Zr(this)))},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},center:function(){return p.vector(this.origin[0]+this.width/2,this.origin[1]+this.height/2)}},M:{area:function(){return this.width*this.height},segments:function(){return[[[(n=this).x,n.y],[n.x+n.width,n.y]],[[n.x+n.width,n.y],[n.x+n.width,n.y+n.height]],[[n.x+n.width,n.y+n.height],[n.x,n.y+n.height]],[[n.x,n.y+n.height],[n.x,n.y]]];var n},svgPath:function(){return"M".concat(this.origin.join(" "),"h").concat(this.width,"v").concat(this.height,"h").concat(-this.width,"Z")}},S:{fromPoints:function(){return p.rect(Pt(gn(arguments)))}}}},Dr={polygon:{P:Tr.prototype,A:function(){this.push.apply(this,r(l(arguments))),this.sides=this.map((function(n,t,r){return[n,r[(t+1)%r.length]]})),this.vectors=this.sides.map((function(n){return E(n[1],n[0])}))},G:{isConvex:function(){return!0},points:function(){return this}},M:{segments:function(){return this.sides},straightSkeleton:function(){return Gt(this)}},S:{fromPoints:function(){return this.constructor.apply(this,arguments)},regularPolygon:function(){return this.constructor(St.apply(void 0,arguments))},convexHull:function(){return this.constructor(Et.apply(void 0,arguments))}}}},Jr=function(n,t){for(var r=0;r<12;r+=1)n[r]=t[r];return n},Xr={matrix:{P:Array.prototype,A:function(){var n=this;An(arguments).forEach((function(t){return n.push(t)}))},G:{},M:{copy:function(){return p.matrix.apply(p,r(Array.from(this)))},set:function(){return Jr(this,An(arguments))},isIdentity:function(){return W(this)},multiply:function(n){return Jr(this,nn(this,n))},determinant:function(){return tn(this)},inverse:function(){return Jr(this,rn(this))},translate:function(n,t,r){return Jr(this,nn(this,en(n,t,r)))},rotateX:function(n){return Jr(this,nn(this,un(n)))},rotateY:function(n){return Jr(this,nn(this,cn(n)))},rotateZ:function(n){return Jr(this,nn(this,an(n)))},rotate:function(n,t,r){var e=sn(n,t,r);return Jr(this,nn(this,e))},scale:function(n){return Jr(this,nn(this,fn(n)))},reflectZ:function(n,t){var r=ln(n,t);return Jr(this,nn(this,r))},transform:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return p.vector(K(this,u(3,pn(t))))},transformVector:function(n){return p.vector(K(this,u(3,pn(n))))},transformLine:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=_n(t);return p.line(Q(this,e.vector,e.origin))}},S:{}}},Yr=function(n){var t=[];return n.forEach((function(n,r){return t[n]=r})),t},$r={junction:{A:function(){var n=gn(arguments).map((function(n){return p.vector(n)})),t=n.map((function(n){return Math.atan2(n[1],n[0])})),e=Mt.apply(void 0,r(t));this.vectors=e.map((function(t){return n[t]})),this.radians=e.map((function(n){return t[n]})),this.order=Yr(e)},G:{sectors:function(){return this.radians.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return pt(n[0],n[1])}))}},M:{alternatingAngleSum:function(){return B(this.sectors)}},S:{fromRadians:function(){var n=pn(arguments);return this.constructor(n.map((function(n){return[Math.cos(n),Math.sin(n)]})))}}}},Br=Object.assign({},jr,Or,kr,Sr,Nr,Fr,Cr,Dr,Xr,$r),Hr=function(n,t){var r=Object.create(Br[n].proto);return Br[n].A.apply(r,t),r};Object.assign(p,{vector:function(){return Hr("vector",arguments)},circle:function(){return Hr("circle",arguments)},ellipse:function(){return Hr("ellipse",arguments)},rect:function(){return Hr("rect",arguments)},polygon:function(){return Hr("polygon",arguments)},line:function(){return Hr("line",arguments)},ray:function(){return Hr("ray",arguments)},segment:function(){return Hr("segment",arguments)},matrix:function(){return Hr("matrix",arguments)},junction:function(){return Hr("junction",arguments)}}),Object.keys(Br).forEach((function(n){var t={};t.prototype=null!=Br[n].P?Object.create(Br[n].P):Object.create(Object.prototype),t.prototype.constructor=t,p[n].prototype=t.prototype,p[n].prototype.constructor=p[n],Object.keys(Br[n].G).forEach((function(r){return Object.defineProperty(t.prototype,r,{get:Br[n].G[r]})})),Object.keys(Br[n].M).forEach((function(r){return Object.defineProperty(t.prototype,r,{value:Br[n].M[r]})})),Object.keys(Br[n].S).forEach((function(t){return Object.defineProperty(p[n],t,{value:Br[n].S[t].bind(p[n].prototype)})})),Br[n].proto=t.prototype}));var Ur=p;return Ur.core=Object.assign(Object.create(null),j,H,In,Ft,bt,y,hn,Rn,Ut,fr,Pn,v,Bt,$n,rr,Mr,{intersect_line_seg_include:ct,intersect_line_seg_exclude:at,intersect_ray_seg_include:st,intersect_ray_seg_exclude:ft,intersect_seg_seg_include:lt,intersect_seg_seg_exclude:ht}),Ur.typeof=o,Ur.intersect=sr,Ur}));
